/**
 * AI Model Registry
 * Defines available models for each AI provider
 */

RED.aiModels = (function () {
    const modelRegistry = {
        openai: {
            name: "OpenAI",
            icon: "fa-bolt",
            color: "#10a37f",
            models: [
                {
                    id: "gpt-4o",
                    name: "GPT-4o",
                    description: "Most advanced model with improved speed and capabilities",
                    supportsFunctionCalling: true,
                    defaultTemperature: 0.7,
                    maxTokens: 4096
                },
                {
                    id: "gpt-4o-mini",
                    name: "GPT-4o Mini",
                    description: "Faster and more affordable GPT-4o variant",
                    supportsFunctionCalling: true,
                    defaultTemperature: 0.7,
                    maxTokens: 16384
                },
                {
                    id: "gpt-4-turbo",
                    name: "GPT-4 Turbo",
                    description: "High-performance GPT-4 variant",
                    supportsFunctionCalling: true,
                    defaultTemperature: 0.7,
                    maxTokens: 4096
                },
                {
                    id: "gpt-4",
                    name: "GPT-4",
                    description: "Original GPT-4 model",
                    supportsFunctionCalling: true,
                    defaultTemperature: 0.7,
                    maxTokens: 4096
                },
                {
                    id: "gpt-3.5-turbo",
                    name: "GPT-3.5 Turbo",
                    description: "Fast and efficient model",
                    supportsFunctionCalling: true,
                    defaultTemperature: 0.7,
                    maxTokens: 4096
                }
            ]
        },
        anthropic: {
            name: "Anthropic Claude",
            icon: "fa-robot",
            color: "#d4a574",
            models: [
                {
                    id: "claude-3-5-sonnet-20241022",
                    name: "Claude 3.5 Sonnet",
                    description: "Most capable model with excellent reasoning",
                    supportsFunctionCalling: true,
                    defaultTemperature: 0.7,
                    maxTokens: 8192
                },
                {
                    id: "claude-3-5-haiku-20241022",
                    name: "Claude 3.5 Haiku",
                    description: "Fast and efficient model",
                    supportsFunctionCalling: true,
                    defaultTemperature: 0.7,
                    maxTokens: 8192
                },
                {
                    id: "claude-3-opus-20240229",
                    name: "Claude 3 Opus",
                    description: "Most powerful Claude 3 model",
                    supportsFunctionCalling: true,
                    defaultTemperature: 0.7,
                    maxTokens: 4096
                },
                {
                    id: "claude-3-sonnet-20240229",
                    name: "Claude 3 Sonnet",
                    description: "Balanced performance and speed",
                    supportsFunctionCalling: true,
                    defaultTemperature: 0.7,
                    maxTokens: 4096
                }
            ]
        },
        gemini: {
            name: "Google Gemini",
            icon: "fa-gem",
            color: "#4285f4",
            models: [
                {
                    id: "gemini-1.5-pro",
                    name: "Gemini 1.5 Pro",
                    description: "Most capable Gemini model with long context",
                    supportsFunctionCalling: true,
                    defaultTemperature: 0.7,
                    maxTokens: 8192
                },
                {
                    id: "gemini-1.5-flash",
                    name: "Gemini 1.5 Flash",
                    description: "Fast and efficient Gemini model",
                    supportsFunctionCalling: true,
                    defaultTemperature: 0.7,
                    maxTokens: 8192
                },
                {
                    id: "gemini-pro",
                    name: "Gemini Pro",
                    description: "Standard Gemini model",
                    supportsFunctionCalling: true,
                    defaultTemperature: 0.7,
                    maxTokens: 4096
                }
            ]
        }
    };

    function getProvider(providerId) {
        return modelRegistry[providerId];
    }

    function getModel(providerId, modelId) {
        const provider = getProvider(providerId);
        if (!provider) return null;
        return provider.models.find(m => m.id === modelId) || null;
    }

    function getAllProviders() {
        return Object.keys(modelRegistry).map(id => ({
            id: id,
            ...modelRegistry[id]
        }));
    }

    function getAvailableModels(providerId) {
        const provider = getProvider(providerId);
        return provider ? provider.models : [];
    }

    function getModelsForProviders(providerIds) {
        const result = {};
        providerIds.forEach(providerId => {
            const provider = getProvider(providerId);
            if (provider) {
                result[providerId] = {
                    provider: provider,
                    models: provider.models
                };
            }
        });
        return result;
    }

    return {
        getProvider: getProvider,
        getModel: getModel,
        getAllProviders: getAllProviders,
        getAvailableModels: getAvailableModels,
        getModelsForProviders: getModelsForProviders,
        registry: modelRegistry
    };
})();

